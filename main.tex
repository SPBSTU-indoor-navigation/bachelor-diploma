\documentclass[a4paper,14pt]{extreport}
\usepackage[left=30mm,right=10mm,top=20mm,bottom=20mm]{geometry}
\parindent 1.25cm
\linespread{1.5}

\usepackage{cmap}
\usepackage{lipsum}  

\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian,english]{babel}
\usepackage{fontspec}
\setmainfont{Times New Roman}

\usepackage{indentfirst}

\usepackage[backend=biber,style=gost-numeric]{biblatex}
\addbibresource{biblio.bib}

\usepackage{multicol}
\usepackage{listings}
\usepackage{graphicx}
\graphicspath{ {img/} }
\usepackage{placeins}
\usepackage{multirow}
\usepackage{paralist}

\usepackage{longtable}
\usepackage{makecell}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{caption, tabularx}
\usepackage{subcaption}
	\DeclareCaptionFont{white}{\color{white}} %% это сделает текст заголовка 
	\DeclareCaptionFormat{listing}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}}
	\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}
	\captionsetup{justification=raggedright,singlelinecheck=false}

\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt} % remove lines as well
\fancyhf{}
\fancyfoot[C]{\thepage}

\fancypagestyle{plain} {
	\renewcommand{\headrulewidth}{0pt} % remove lines as well
	\fancyhf{}
  \fancyfoot[C]{\thepage}
}

\usepackage{titletoc, amsmath, lastpage} %подключаем нужные пакеты расширений
\usepackage[raggedright]{titlesec} % не переносить заголовки

\renewcommand{\chaptertitlename}{ГЛАВА}
\titleformat{\chapter}[block]
{\centering\Large\bfseries}{\chaptertitlename\ \thechapter .}{4pt}{\MakeUppercase}

\titleformat{\section}[block]
{\centering\Large\bfseries}{\thesection .}{4pt}{}

\titleformat{\subsection}[block]
{\centering\Large\itshape}{\thesubsection .}{4pt}{}

\titleformat{\subsubsection}[block]
{\centering}{\thesubsubsection .}{4pt}{}


% TABLE OF CONTENT CONFIG
\usepackage{tocloft} 

% disables bold in table of content
\newcommand*{\disableboldchapterintoc}{%
	\addtocontents{toc}{\string\renewcommand{\protect\cftchappagefont}{\protect\normalfont}}
	\addtocontents{toc}{\string\renewcommand{\protect\cftchapfont}{\protect\normalfont}}
	\addtocontents{toc}{\string\renewcommand{\protect\cftchapleader}{\protect\normalfont\protect\cftdotfill{\protect\cftsecdotsep}}}% 
}

\renewcommand{\cftaftertoctitle}{\hfill}
\renewcommand{\cftbeforetoctitleskip}{0cm}
\renewcommand{\cftaftertoctitleskip}{1.0\baselineskip}

\makeatletter
\renewcommand{\l@chapter}{\@dottedtocline{1}{0em}{0.9em}}
\renewcommand{\l@section}{\@dottedtocline{1}{0em}{1.6em}}
\renewcommand{\l@subsection}{\@dottedtocline{2}{0em}{2.6em}}
\renewcommand{\l@subsubsection}{\@dottedtocline{3}{0em}{4.5em}}
\makeatother

\titlecontents{chapter}% <section-type>
[0pt]% <left>
{}% <above-code>
{\chaptername\ \thecontentslabel. }% <numbered-entry-format>
{}% <numberless-entry-format>
{\cftdotfill{\cftsecdotsep}\contentspage}% <filler-page-format>
\renewcommand{\cftdotsep}{1}

\makeatletter
\renewcommand\chapter{\par%
  \thispagestyle{plain}%
  \global\@topnum\z@
  \@afterindentfalse
  \secdef\@chapter\@schapter}
\makeatother

% end config table of content

\makeatletter
\renewcommand\large{\@setfontsize\large{14}{16}}
\renewcommand\Large{\@setfontsize\Large{14}{16}}
\renewcommand\Large{\@setfontsize\LARGE{14}{16}}
\makeatother

\usepackage{placeins} % floatbarrier
\usepackage{setspace} %line spacing


\renewcommand{\theenumi}{\arabic{enumi}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\labelenumi}{\arabic{enumi}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\theenumii}{.\arabic{enumii}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\labelenumii}{\hspace*{1cm}\arabic{enumi}.\arabic{enumii}.}% Меняем везде перечисления на цифра.цифра
\renewcommand{\theenumiii}{.\arabic{enumiii}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\labelenumiii}{\arabic{enumi}.\arabic{enumii}.\arabic{enumiii}.}% Меняем везде перечисления на цифра.цифра

\renewcommand{\cellalign}{vh}
\renewcommand{\theadalign}{vh}

\newcommand{\chaperWONum}[1]{\chapter*{#1}\addcontentsline{toc}{chapter}{#1}}

\lstset{ %
language=java,                 % выбор языка для подсветки (здесь это С)
basicstyle=\small\sffamily, % размер и начертание шрифта для подсветки кода
numbers=left,               % где поставить нумерацию строк (слева\справа)
numberstyle=\tiny,           % размер шрифта для номеров строк
stepnumber=1,                   % размер шага между двумя номерами строк
firstnumber=1,
numberfirstline=true
numbersep=5pt,                % как далеко отстоят номера строк от подсвечиваемого кода
backgroundcolor=\color{white}, % цвет фона подсветки - используем \usepackage{color}
showspaces=false,            % показывать или нет пробелы специальными отступами
showstringspaces=false,      % показывать или нет пробелы в строках
showtabs=false,             % показывать или нет табуляцию в строках
frame=single,              % рисовать рамку вокруг кода
tabsize=2,                 % размер табуляции по умолчанию равен 2 пробелам
captionpos=t,              % позиция заголовка вверху [t] или внизу [b] 
breaklines=true,           % автоматически переносить строки (да\нет)
breakatwhitespace=false, % переносить строки только если есть пробел
escapeinside={\%*}{*)}   % если нужно добавить комментарии в коде
}

\titlespacing{\chapter}{0pt}{10pt}{6pt}


\begin{document}
  \selectlanguage{russian}
  \begin{spacing}{1}
    \pagenumbering{gobble} % disable page numbering
    \input{pages/titlepage}% это титульный лист для диплома
  \end{spacing}

  \sloppy
  \setcounter{page}{2}
  \pagenumbering{arabic} % enable page numbering back

  \chapter*{Реферат}
    \input{pages/1-referat-ru.tex}

    \newpage
  \chapter*{Abstract}
    \input{pages/1-referat-en.tex}

    \newpage
    \disableboldchapterintoc
    \renewcommand{\contentsname}{\textbf{СОДЕРЖАНИЕ}}
    \renewcommand{\cfttoctitlefont}{\hfill\Large}

    \tableofcontents
    \newpage


    % введение
    \chaperWONum{Введение}
    \input{pages/2-introduction.tex}

    \input{pages/3-main-part.tex}

    \chaperWONum{Заключение}
    \input{pages/4-conclusion.tex}



    \newpage
    \chaperWONum{Список источников}
    \printbibliography[heading=none]

\end{document}
